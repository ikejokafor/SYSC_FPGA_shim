Modify shim so hardware sends acks to software for each message; software shim will wait until it gets acks before proceeding